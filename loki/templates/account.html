{% extends 'layout.html' %}

{% block content %}
<div class="content-section">
		<form method="POST" action="" enctype="multipart/form-data">
			{{ model_form.hidden_tag() }}
			<fieldset class="form-group">
				<div class="form-group">
					{{ model_form.name.label(class="form-control-label")}}
					{% if model_form.name.errors %}
						{{ model_form.name(class="form-control form-control-lg is-invalid")}}
						<div class="invalid-feedback">
							{% for error in model_form.name.errors %}
								<span> {{ error }} </span>
							{% endfor %}
						</div>
					{% else %}
						{{ model_form.name(class="form-control form-control-lg")}}
					{% endif %}
				</div>
				<div class="form-group">
					{{ model_form.model.label(class="form-control-label")}}
					{% if model_form.model.errors %}
						{{ model_form.model(class="form-control form-control-lg is-invalid")}}
						<div class="invalid-feedback">
							{% for error in model_form.model.errors %}
								<span> {{ error }} </span>
							{% endfor %}
						</div>
					{% else %}
						{{ model_form.model(class="form-control")}}
					{% endif %}
				</div>
			</fieldset>
			<div class="form-group">
					{{ model_form.submit(class="btn btn-dark")}}
			</div>
		</form>
	</div>
{% endblock content %}
{% block content2 %}
<div class="row justify-content-center">
	<table class="table">
	  <thead class="thead-dark">
		<tr>
		  <th scope="col">Name of the Model</th>
		  <th scope="col">Latest report</th>
		  <th scope="col">Run new report</th>
		</tr>
	  </thead>
	  <tbody>
	  	{% for model in models.items %}
			<tr>
			  <td>{{model.name}}</td>
			  <td>{{model.last_report}}</td>			  
			  <td>
			  		<div class="modal fade" id="modalAttacks" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
					  <div class="modal-dialog" role="document">
						<div class="modal-content">
						  <div class="modal-header text-center">
							<h4 class="modal-title w-100 font-weight-bold">Choose the attacks for the report</h4>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							  <span aria-hidden="true">&times;</span>
							</button>
						  </div>
						  
						  <!-- Table with panel -->
								<div class="card card-cascade narrower">
								  <div class="px-4">
									<div class="table-wrapper">
									  <!--Table-->
									  <table class="table table-hover mb-0">
										<!--Table head-->
										<thead>
										  <tr>
										  	<th class="th-lg">
											</th>
											<th class="th-lg">
											  <a>Name
												<i class="fas fa-sort ml-1"></i>
											  </a>
											</th>
											<th class="th-lg">
											  <a>Type
												<i class="fas fa-sort ml-1"></i>
											  </a>
											</th>
											<th class="th-lg">
											  <a>Complexity
												<i class="fas fa-sort ml-1"></i>
											  </a>
											</th>
											<th class="th-lg">
											 	Description
											</th>
										  </tr>
										</thead>
										<!--Table head-->

										<!--Table body-->
										{% for attack in attacks%}<tbody>
										  <tr>
											<th scope="row">
											  <input class="form-check-input" type="checkbox" id="checkbox1">
											  <label class="form-check-label" for="checkbox1" class="label-table"></label>
											</th>
											<td>{{attack.name}}</td>
											<td>{{attack.type}}</td>
											<td>{{attack.complexity}}</td>
											<td>{{attack.description}}</td>
										  </tr>
										</tbody>											
										{% endfor %}
										<!--Table body-->
									  </table>
									  <!--Table-->
									</div>
								  </div>
								</div>
								<!-- Table with panel -->
						</div>
					  </div>
					</div>
					<button type="button" class="btn btn-dark" data-toggle="modal" data-target="#modalAttacks">
					  Launch set of attacks
					</button>

				</td>

			  <!-- <td> {{ run_report_forms[model].submit(class="btn btn-dark")}} </td> -->
			</tr>
		{% endfor %}
	  </tbody>
	</table>
</div>
	{% for page_num in models.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
      {% if page_num %}
      	{% if models.page == page_num %}
      		<a class="btn btn-info mb-4 "href="{{url_for('account', page=page_num)}}">{{page_num}}</a>
      	{% else %}
      		<a class="btn btn-outline-info mb-4 "href="{{url_for('account', page=page_num)}}">{{page_num}}</a>
      	{% endif %}
      {% else %}
      	...
      {% endif %}
      
    {% endfor %}
{% endblock content2 %}
